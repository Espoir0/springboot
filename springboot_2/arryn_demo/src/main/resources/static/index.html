<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.0.1/css/bootstrap.min.css">
    <link href="https://cdn.bootcss.com/bootstrap-table/1.12.1/bootstrap-table.min.css" rel="stylesheet">
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>
    function login(){
         var username=$('#username').val();

         var password=$('#password').val();
         console.log('login name is'+username)
         console.log('login password is'+password)

        $.ajax({
            type:"POST",
            url:"/register2",
            dataType:"json",
            data:{
                username:username,
                password:password,
                },
            success:function(data){
                if(data.status=="exist"){
                    alert("用户已存在。")
                    console.log('exist')
                }else if(data.status=="ok"){
                    alert("注册成功")
                    console.log('ok')
                }else{
                    alert("注册失败")
                    console.log('fail')
                    }
            },
            error: function(jqXHR){
                alert("发生错误"+   jqXHR.status)
            }
        });
    }

     function sel(){
        var username=$('#queryusername').val()
        console.log('select name is'+username);


        $.ajax({
            type:"GET",
            url:"/sel2",
            dataType:"json",
            data:{
                username:username,
                },
            success:function(data){
                if(data){
                    alert("用户存在。")
                    console.log('ok')
                }else{
                    alert("用户不存在")
                    console.log('fail')
                    }
            },
            error:function(jqXHR){
                alert("发生错误"+   jqXHR.status)
            }
        });
    }

    function update(){
        var username=$('#queryusername').val();
        var password=$('#newpassword').val();
        console.log('login name is'+username)
        console.log('login password is'+password)

        $.ajax({
            type:"POST",
            url:"/update2",
            dataType:"json",
            data:{
                username:username,
                password:password},

            success:function(data){
                if(data.status){
                    alert("修改成功")
                    console.log('ok')
                }else{
                    alert("修改失败")
                    console.log('fail')
                    }
            },
            error:function(jqXHR){
                alert("发生错误"+   jqXHR.status)
            }
        });
    }

    function del(){
        var username=$('#delusername').val();

        console.log('delete name is'+username)

        $.ajax({
            type:"DELETE",
            url:"/del2",
            dataType:"json",
            data:{
                username:username,
                },
            success:function(data){
               if(data.status=="no exist"){
                    alert("用户不存在。")
                    console.log('no exist')
                }else if(data.status=="ok"){
                    alert("删除成功")
                    console.log('ok')
                }else{
                    alert("删除失败")
                    console.log('fail')
                    }
            },
            error:function(jqXHR){
                alert("发生错误"+   jqXHR.status)
            }
        });
    }

    </script>


    <title>holle</title>
</head>
<body>
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="http://apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap-table/1.12.1/bootstrap-table.min.js"></script>

username: <input id="username">
password: <input id="password">
<button onclick="login()">注册</button>
<br>

username: <input id="queryusername">
<button onclick="sel()">查询</button>
password:<input id="newpassword">
<button onclick="update()">修改</button>
<br>
username: <input id="delusername">
<button onclick="del()">删除</button>


</body>
</html>